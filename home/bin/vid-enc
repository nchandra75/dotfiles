#!/bin/bash
# Encode video lectures

f=$(basename `ls $1*.vnc` .vnc)
echo "Converting $f"

audin=$f.wav
audout=$f.mp3
# Convert to MP3
lame $audin $audout
if [ ! $? ]; then
    echo "Audio conversion failed!"
    exit;
fi

# VNC 2 SWF
vnc2swf-edit -V -r 4 -a $audout -o $1.swf $f.vnc
if [ ! $? ]; then
    echo "Video conversion failed!!"
    exit;
fi

mv $1.html $1.swf video/
mv $f.vnc $f.wav $f.mp3 backup/

echo "All done!"
